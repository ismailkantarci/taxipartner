import { useMemo } from 'react';
import { useSyncExternalStore } from 'react';
import { SYSTEM_DEFAULT_LOCALE } from '../settings/types';
const bundles = {
    'de-AT': {
        'app.language.de': 'Deutsch (Österreich)',
        'app.language.en': 'Englisch (UK)',
        'app.language.tr': 'Türkçe',
        'app.language.uk': 'Українська',
        'settings.title': 'Systemeinstellungen',
        'settings.description': 'Passe Erscheinungsbild, Sprache und persönliche Präferenzen für dein Konto an.',
        'settings.nav.appearance': 'Erscheinungsbild',
        'settings.nav.language': 'Sprache & Region',
        'settings.nav.preferences': 'Präferenzen',
        'settings.theme.label': 'Theme auswählen',
        'settings.theme.light': 'Hell',
        'settings.theme.dark': 'Dunkel',
        'settings.theme.system': 'Systemstandard',
        'settings.locale.language': 'Sprache',
        'settings.locale.dateStyle': 'Datumsformat',
        'settings.locale.dateStyle.short': 'Kurz',
        'settings.locale.dateStyle.medium': 'Mittel',
        'settings.locale.dateStyle.long': 'Lang',
        'settings.locale.numberGrouping': 'Zahlenformat',
        'settings.locale.preview': 'Vorschau',
        'settings.locale.section.user': 'Deine Einstellungen',
        'settings.locale.section.tenant': 'Mandanten-Standard',
        'settings.locale.grouping.auto': 'Automatisch',
        'settings.locale.grouping.space': 'Leerzeichen',
        'settings.locale.grouping.dot': 'Punkt',
        'settings.preferences.density': 'Tabellendichte',
        'settings.preferences.density.comfortable': 'Komfortabel',
        'settings.preferences.density.compact': 'Kompakt',
        'settings.preferences.animations': 'Animationen aktivieren',
        'settings.preferences.animations.on': 'Aktiv',
        'settings.preferences.animations.off': 'Deaktiviert',
        'settings.preferences.description': 'Passe Tabellenanzeige und Animationen an.',
        'settings.save': 'Speichern',
        'settings.saving': 'Speichern…',
        'settings.saved': 'Einstellungen aktualisiert',
        'settings.loading': 'Lade Einstellungen…',
        'settings.error': 'Aktualisieren fehlgeschlagen',
        'header.language.quick': 'Sprache',
        'audit.title': 'Audit-Center',
        'audit.description': 'Überwache Ereignisse, Berechtigungen und Exporte in Echtzeit.',
        'audit.table.timestamp': 'Zeit',
        'audit.table.summary': 'Zusammenfassung',
        'audit.table.action': 'Aktion',
        'audit.table.actor': 'Akteur',
        'audit.table.target': 'Ziel',
        'audit.table.source': 'Quelle',
        'audit.actions.export': 'CSV exportieren',
        'audit.filters.search': 'Ereignisse durchsuchen…',
        'audit.filters.user': 'Benutzer',
        'audit.filters.user.all': 'Alle Benutzer',
        'audit.filters.action': 'Aktion',
        'audit.filters.action.all': 'Alle Aktionen',
        'audit.filters.from': 'Von',
        'audit.filters.to': 'Bis',
        'audit.filters.reset': 'Filter zurücksetzen',
        'audit.refreshing': 'Aktualisiere…',
        'audit.empty': 'Keine Audit-Ereignisse entsprechen den Filtern.',
        'audit.pagination.summary': 'Seite {{page}} von {{pages}} · {{total}} Ereignisse',
        'audit.pagination.prev': 'Zurück',
        'audit.pagination.next': 'Weiter',
        'audit.export.empty': 'Keine Daten zum Exportieren',
        'audit.detail.noData': 'Audit-Ereignis',
        'audit.detail.missing': 'Dieser Audit-Eintrag konnte nicht geladen werden.',
        'audit.detail.close': 'Audit-Ereignis schließen',
        'audit.detail.timestamp': 'Zeitstempel',
        'audit.detail.actor': 'Akteur',
        'audit.detail.target': 'Ziel',
        'audit.detail.source': 'Quelle',
        'audit.detail.severity': 'Schweregrad',
        'audit.detail.metadata': 'Payload',
        'audit.detail.context': 'Kontext',
        'route.error.title': 'Etwas ist schiefgelaufen',
        'route.error.generic': 'Beim Laden dieser Seite ist ein unerwarteter Fehler aufgetreten.',
        'route.error.retry': 'Erneut versuchen',
        'global.error.title': 'Wir kümmern uns darum.',
        'global.error.message': 'Es ist ein unerwarteter Fehler aufgetreten. Unser Team wurde benachrichtigt.',
        'global.error.support': 'Support kontaktieren',
        'network.online.title': 'Wieder online',
        'network.online.body': 'Verbindung wiederhergestellt.',
        'network.offline.title': 'Offline-Modus',
        'network.offline.body': 'Änderungen werden synchronisiert, sobald die Verbindung steht.'
    },
    'tr-TR': {
        'app.language.de': 'Almanca (Avusturya)',
        'app.language.en': 'İngilizce (İngiltere)',
        'app.language.tr': 'Türkçe',
        'app.language.uk': 'Ukraynaca',
        'settings.title': 'Sistem Ayarları',
        'settings.description': 'Görünüm, dil ve kişisel tercihleri hesabın için özelleştir.',
        'settings.nav.appearance': 'Görünüm',
        'settings.nav.language': 'Dil & Bölge',
        'settings.nav.preferences': 'Tercihler',
        'settings.theme.label': 'Tema seç',
        'settings.theme.light': 'Açık',
        'settings.theme.dark': 'Koyu',
        'settings.theme.system': 'Sistem',
        'settings.locale.language': 'Dil',
        'settings.locale.dateStyle': 'Tarih biçimi',
        'settings.locale.numberGrouping': 'Sayı biçimi',
        'settings.locale.dateStyle.short': 'Kısa',
        'settings.locale.dateStyle.medium': 'Orta',
        'settings.locale.dateStyle.long': 'Uzun',
        'settings.locale.preview': 'Önizleme',
        'settings.locale.section.user': 'Senin tercihler',
        'settings.locale.section.tenant': 'Kiracı varsayılanı',
        'settings.locale.grouping.auto': 'Otomatik',
        'settings.locale.grouping.space': 'Boşluk',
        'settings.locale.grouping.dot': 'Nokta',
        'settings.preferences.density': 'Tablo yoğunluğu',
        'settings.preferences.density.comfortable': 'Rahat',
        'settings.preferences.density.compact': 'Sık',
        'settings.preferences.animations': 'Animasyonları etkinleştir',
        'settings.preferences.animations.on': 'Açık',
        'settings.preferences.animations.off': 'Kapalı',
        'settings.preferences.description': 'Tablo görünümü ve animasyonları ayarla.',
        'settings.save': 'Kaydet',
        'settings.saving': 'Kaydediliyor…',
        'settings.saved': 'Ayarlar güncellendi',
        'settings.loading': 'Ayarlar yükleniyor…',
        'settings.error': 'Ayarlar güncellenemedi',
        'header.language.quick': 'Dil',
        'audit.title': 'Denetim Merkezi',
        'audit.description': 'Olayları, yetkileri ve dışa aktarmaları gerçek zamanlı izle.',
        'audit.table.timestamp': 'Zaman',
        'audit.table.summary': 'Özet',
        'audit.table.action': 'Aksiyon',
        'audit.table.actor': 'Kullanıcı',
        'audit.table.target': 'Hedef',
        'audit.table.source': 'Kaynak',
        'audit.actions.export': 'CSV dışa aktar',
        'audit.filters.search': 'Olaylarda ara…',
        'audit.filters.user': 'Kullanıcı',
        'audit.filters.user.all': 'Tüm kullanıcılar',
        'audit.filters.action': 'Aksiyon',
        'audit.filters.action.all': 'Tüm aksiyonlar',
        'audit.filters.from': 'Başlangıç',
        'audit.filters.to': 'Bitiş',
        'audit.filters.reset': 'Filtreleri sıfırla',
        'audit.refreshing': 'Yenileniyor…',
        'audit.empty': 'Filtrelere uyan kayıt bulunamadı.',
        'audit.pagination.summary': '{{page}} / {{pages}} sayfa · {{total}} olay',
        'audit.pagination.prev': 'Önceki',
        'audit.pagination.next': 'Sonraki',
        'audit.export.empty': 'Dışa aktarılacak veri yok',
        'audit.detail.noData': 'Denetim kaydı',
        'audit.detail.missing': 'Bu denetim kaydı yüklenemedi.',
        'audit.detail.close': 'Denetim kaydını kapat',
        'audit.detail.timestamp': 'Zaman damgası',
        'audit.detail.actor': 'Kullanıcı',
        'audit.detail.target': 'Hedef',
        'audit.detail.source': 'Kaynak',
        'audit.detail.severity': 'Önem derecesi',
        'audit.detail.metadata': 'Payload',
        'audit.detail.context': 'Bağlam',
        'route.error.title': 'Bir şeyler ters gitti',
        'route.error.generic': 'Bu sayfa yüklenirken beklenmedik bir hata oluştu.',
        'route.error.retry': 'Tekrar dene',
        'global.error.title': 'Çözmeye çalışıyoruz.',
        'global.error.message': 'Beklenmedik bir hata oluştu. Ekiplerimiz bilgilendirildi.',
        'global.error.support': 'Destek ile iletişime geç',
        'network.online.title': 'Tekrar çevrimiçi',
        'network.online.body': 'Bağlantı yeniden kuruldu.',
        'network.offline.title': 'Çevrimdışı mod',
        'network.offline.body': 'Bağlantı geri geldiğinde değişiklikler senkronize edilecek.'
    },
    'en-GB': {
        'app.language.de': 'German (Austria)',
        'app.language.en': 'English (UK)',
        'app.language.tr': 'Turkish',
        'app.language.uk': 'Ukrainian',
        'settings.title': 'System Settings',
        'settings.description': 'Tailor appearance, language and personal preferences for your account.',
        'settings.nav.appearance': 'Appearance',
        'settings.nav.language': 'Language & Region',
        'settings.nav.preferences': 'Preferences',
        'settings.theme.label': 'Choose theme',
        'settings.theme.light': 'Light',
        'settings.theme.dark': 'Dark',
        'settings.theme.system': 'System',
        'settings.locale.language': 'Language',
        'settings.locale.dateStyle': 'Date style',
        'settings.locale.numberGrouping': 'Number grouping',
        'settings.locale.dateStyle.short': 'Short',
        'settings.locale.dateStyle.medium': 'Medium',
        'settings.locale.dateStyle.long': 'Long',
        'settings.locale.preview': 'Preview',
        'settings.locale.section.user': 'Your preferences',
        'settings.locale.section.tenant': 'Tenant defaults',
        'settings.locale.grouping.auto': 'Automatic',
        'settings.locale.grouping.space': 'Space',
        'settings.locale.grouping.dot': 'Dot',
        'settings.preferences.density': 'Table density',
        'settings.preferences.density.comfortable': 'Comfortable',
        'settings.preferences.density.compact': 'Compact',
        'settings.preferences.animations': 'Enable animations',
        'settings.preferences.animations.on': 'Enabled',
        'settings.preferences.animations.off': 'Disabled',
        'settings.preferences.description': 'Tweak table spacing and motion effects.',
        'settings.save': 'Save',
        'settings.saving': 'Saving…',
        'settings.saved': 'Settings updated',
        'settings.loading': 'Loading settings…',
        'settings.error': 'Failed to update settings',
        'header.language.quick': 'Language',
        'audit.title': 'Audit center',
        'audit.description': 'Monitor events, permissions and exports in real time.',
        'audit.table.timestamp': 'Time',
        'audit.table.summary': 'Summary',
        'audit.table.action': 'Action',
        'audit.table.actor': 'Actor',
        'audit.table.target': 'Target',
        'audit.table.source': 'Source',
        'audit.actions.export': 'Export CSV',
        'audit.filters.search': 'Search events…',
        'audit.filters.user': 'Actor',
        'audit.filters.user.all': 'All actors',
        'audit.filters.action': 'Action',
        'audit.filters.action.all': 'All actions',
        'audit.filters.from': 'From',
        'audit.filters.to': 'To',
        'audit.filters.reset': 'Reset filters',
        'audit.refreshing': 'Refreshing…',
        'audit.empty': 'No audit events match your filters.',
        'audit.pagination.summary': 'Showing page {{page}} of {{pages}} · {{total}} events',
        'audit.pagination.prev': 'Prev',
        'audit.pagination.next': 'Next',
        'audit.export.empty': 'Nothing to export',
        'audit.detail.noData': 'Audit event',
        'audit.detail.missing': 'This audit entry could not be loaded.',
        'audit.detail.close': 'Close audit event',
        'audit.detail.timestamp': 'Timestamp',
        'audit.detail.actor': 'Actor',
        'audit.detail.target': 'Target',
        'audit.detail.source': 'Source',
        'audit.detail.severity': 'Severity',
        'audit.detail.metadata': 'Payload',
        'audit.detail.context': 'Context',
        'route.error.title': 'Something went wrong',
        'route.error.generic': 'We ran into an unexpected issue while loading this page.',
        'route.error.retry': 'Try again',
        'global.error.title': 'We’re fixing it.',
        'global.error.message': 'An unexpected error occurred. Our team has been notified.',
        'global.error.support': 'Contact support',
        'network.online.title': 'Back online',
        'network.online.body': 'Connection restored.',
        'network.offline.title': 'Offline mode',
        'network.offline.body': 'Changes will sync once your connection is back.'
    },
    'uk-UA': {
        'app.language.de': 'Німецька (Австрія)',
        'app.language.en': 'Англійська (Велика Британія)',
        'app.language.tr': 'Турецька',
        'app.language.uk': 'Українська',
        'settings.title': 'Системні налаштування',
        'settings.description': 'Налаштуйте вигляд, мову та особисті вподобання для свого облікового запису.',
        'settings.nav.appearance': 'Вигляд',
        'settings.nav.language': 'Мова та регіон',
        'settings.nav.preferences': 'Параметри',
        'settings.theme.label': 'Оберіть тему',
        'settings.theme.light': 'Світла',
        'settings.theme.dark': 'Темна',
        'settings.theme.system': 'Системна',
        'settings.locale.language': 'Мова',
        'settings.locale.dateStyle': 'Формат дати',
        'settings.locale.numberGrouping': 'Групування чисел',
        'settings.locale.dateStyle.short': 'Короткий',
        'settings.locale.dateStyle.medium': 'Середній',
        'settings.locale.dateStyle.long': 'Довгий',
        'settings.locale.preview': 'Попередній перегляд',
        'settings.locale.section.user': 'Ваші налаштування',
        'settings.locale.section.tenant': 'Стандарт організації',
        'settings.locale.grouping.auto': 'Авто',
        'settings.locale.grouping.space': 'Пробіл',
        'settings.locale.grouping.dot': 'Крапка',
        'settings.preferences.density': 'Щільність таблиці',
        'settings.preferences.density.comfortable': 'Комфортна',
        'settings.preferences.density.compact': 'Компактна',
        'settings.preferences.animations': 'Увімкнути анімації',
        'settings.preferences.animations.on': 'Увімкнено',
        'settings.preferences.animations.off': 'Вимкнено',
        'settings.preferences.description': 'Налаштуйте відображення таблиць та анімацію.',
        'settings.save': 'Зберегти',
        'settings.saving': 'Збереження…',
        'settings.saved': 'Налаштування оновлено',
        'settings.loading': 'Завантаження налаштувань…',
        'settings.error': 'Не вдалося оновити налаштування',
        'header.language.quick': 'Мова',
        'audit.title': 'Центр аудиту',
        'audit.description': 'Слідкуйте за подіями, доступами та експортами у режимі реального часу.',
        'audit.table.timestamp': 'Час',
        'audit.table.summary': 'Опис',
        'audit.table.action': 'Дія',
        'audit.table.actor': 'Користувач',
        'audit.table.target': 'Обʼєкт',
        'audit.table.source': 'Джерело',
        'audit.actions.export': 'Експорт CSV',
        'audit.filters.search': 'Пошук подій…',
        'audit.filters.user': 'Користувач',
        'audit.filters.user.all': 'Усі користувачі',
        'audit.filters.action': 'Дія',
        'audit.filters.action.all': 'Усі дії',
        'audit.filters.from': 'Від',
        'audit.filters.to': 'До',
        'audit.filters.reset': 'Скинути фільтри',
        'audit.refreshing': 'Оновлення…',
        'audit.empty': 'Події, що відповідають фільтрам, відсутні.',
        'audit.pagination.summary': 'Сторінка {{page}} з {{pages}} · {{total}} подій',
        'audit.pagination.prev': 'Назад',
        'audit.pagination.next': 'Далі',
        'audit.export.empty': 'Немає даних для експорту',
        'audit.detail.noData': 'Подія аудиту',
        'audit.detail.missing': 'Не вдалося завантажити цю подію аудиту.',
        'audit.detail.close': 'Закрити подію аудиту',
        'audit.detail.timestamp': 'Час',
        'audit.detail.actor': 'Користувач',
        'audit.detail.target': 'Обʼєкт',
        'audit.detail.source': 'Джерело',
        'audit.detail.severity': 'Рівень',
        'audit.detail.metadata': 'Дані',
        'audit.detail.context': 'Контекст',
        'route.error.title': 'Сталася помилка',
        'route.error.generic': 'Під час завантаження сторінки сталася неочікувана помилка.',
        'route.error.retry': 'Спробувати ще раз',
        'global.error.title': 'Ми вже працюємо над цим.',
        'global.error.message': 'Сталася непередбачена помилка. Наша команда вже повідомлена.',
        'global.error.support': 'Звернутися до підтримки',
        'network.online.title': 'Знову онлайн',
        'network.online.body': 'З’єднання відновлено.',
        'network.offline.title': 'Офлайн режим',
        'network.offline.body': 'Зміни синхронізуються після відновлення звʼязку.'
    }
};
const FALLBACK_LOCALE = 'de-AT';
let activeLocale = SYSTEM_DEFAULT_LOCALE;
const localeSubscribers = new Set();
const notify = () => {
    localeSubscribers.forEach(listener => {
        try {
            listener();
        }
        catch (error) {
            console.error('[i18n] listener error', error);
        }
    });
};
const interpolate = (template, values) => {
    if (!values)
        return template;
    return template.replace(/\{\{(\w+)\}\}/g, (match, key) => {
        const value = values[key];
        return value === undefined ? match : String(value);
    });
};
export const AVAILABLE_LANGUAGES = [
    { code: 'de-AT', labelKey: 'app.language.de' },
    { code: 'en-GB', labelKey: 'app.language.en' },
    { code: 'tr-TR', labelKey: 'app.language.tr' },
    { code: 'uk-UA', labelKey: 'app.language.uk' }
];
export const getActiveLocale = () => activeLocale;
export const setActiveLocale = (prefs) => {
    activeLocale = {
        ...SYSTEM_DEFAULT_LOCALE,
        ...prefs
    };
    notify();
};
export const translate = (key, options) => {
    const dictionaries = [
        bundles[activeLocale.locale],
        bundles[FALLBACK_LOCALE]
    ].filter(Boolean);
    const template = dictionaries.find(dict => Object.prototype.hasOwnProperty.call(dict, key))?.[key] ??
        options?.defaultValue ??
        key;
    return interpolate(template, options?.values);
};
const subscribeLocale = (listener) => {
    localeSubscribers.add(listener);
    return () => localeSubscribers.delete(listener);
};
const getLocaleSnapshot = () => activeLocale;
export const useLocale = () => useSyncExternalStore(subscribeLocale, getLocaleSnapshot, getLocaleSnapshot);
export const useTranslation = () => {
    const locale = useLocale();
    return useMemo(() => ({
        locale,
        t: (key, options) => translate(key, options)
    }), [locale]);
};
